import { CodeSurfer } from 'code-surfer'
import { nightOwl } from "@code-surfer/themes"

export const theme = nightOwl

# Let's make a Promise

Or: _How I learned to stop using callbacks and love the `Promise` implementation_

---

## Required knowledge

- Common data types (primitives, arrays, and objects)
- Functions, particularly as a first class data type

---

## A refresher on First Class Functions

<CodeSurfer>

```js
setTimeout(() => {
  console.log('Hello, world!')
}, 1000)
```

```js 1[1:11],3[8]
setTimeout(() => {
  console.log('Hello, world!')
}, 1000)
```

```js 1[12:19],2,3[1]
setTimeout(() => {
  console.log('Hello, world!')
}, 1000)
```

```js 3[4:7]
setTimeout(() => {
  console.log('Hello, world!')
}, 1000)
```

```js 1[12:19],2,3[1]
setTimeout(() => {
  console.log('Hello, world!')
}, 1000)
```

```js 1[18:24],2,3[1]
const sayHello = () => {
  console.log('Hello, world!')
}

setTimeout(sayHello, 1000)
```

```js
const sayHello = () => {
  console.log('Hello, world!')
}

setTimeout(sayHello, 1000)
```

```js 5[22:25]
const sayHello = () => {
  console.log('Hello, world!')
}

setTimeout(sayHello, 1000)
```

```js 5,7[22:28]
const sayHello = () => {
  console.log('Hello, world!')
}

const timeout = 1000

setTimeout(sayHello, timeout)
```

```js
const sayHello = () => {
  console.log('Hello, world!')
}

const timeout = 1000

setTimeout(sayHello, timeout)
```

</CodeSurfer>

<Notes>

In JavaScript, functions are First Class Citizens. I.e. they can be passed around like all other data types.

</Notes>

---

<CodeSurfer>

```js
setTimeout(() => {
  console.log('Hello, world!')
}, 1000)
```

</CodeSurfer>

is equivalent to

<CodeSurfer>

```js
const sayHello = () => {
  console.log('Hello, world!')
}

const timeout = 1000

setTimeout(sayHello, timeout)
```

</CodeSurfer>

---

## What this won't cover

- `async`/`await`
- A lot of the extra features that the `Promise` implmentation offers
- Why leaves are usually green

<Notes>

- async/await is certainly useful, but a solid understanding of Promises is what you really need to leverage it properly
- Promise.all, Promise.race, Promise.any (though I challenge you to implement these yourself after today's talk)

</Notes>

---

## Okay, so what's a Promise?

<Steps>

> “The `Promise` object represents the **eventual completion (or failure)** of an asynchronous operation and its **resulting value**.”
– MDN

</Steps>

<Notes>

- That's spot on. But also pretty useless on its own

</Notes>
